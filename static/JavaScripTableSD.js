gx.grid.impl=function(q){var t=/style="([^"]*)"/ig;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.align=this.width="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.usePaging=this.ascSort=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName="";this.gxGridObject=
null;this.gxBuffer=new gx.text.stringBuffer;this.evenRowCellClass=this.evenRowClass=this.oddRowCellClass=this.oddRowClass=this.columnHeaderTextClass=this.columnHeaderClass=this.highlightedNavigationLinkClass=this.navigationLinkClass=this.navigationClass=this.editControlClass=this.footerClass=this.headerClass=this.tableClass=this.gxParentRowId="";"undefined"!=typeof Image?(this.ascLabel=new Image,this.descLabel=new Image):this.descLabel=this.ascLabel=null;this.id=q;this.container=null;this.setContainerDelayed=
function(a){this.container=a};this.addColumn=function(a){if(a.isGxRemove())a.visible=false;var b=this.columns.length;a.index=b;a.table=this;this.columns[b]=a;typeof a.htmlName!="undefined"&&(this.columnsHtmlName[a.htmlName]=a);typeof a.gxId!="undefined"&&(this.columnsGxId[a.gxId]=a);typeof a.gxAttId!="undefined"&&(this.columnsGxAttId[a.gxAttId]=a);return a};this.getColumnByIndex=function(a){return this.columns[a]};this.addRow=function(a,b){a.table=this;if(a!=null){this.rows[this.rows.length]=a;typeof a.id!=
"undefined"&&(this.rowsById[a.id]=a);typeof a.gxId!="undefined"&&(this.rowsByGxId[a.gxId]=a);gx.lang.booleanValue(b)&&this.render();return a}};this.getColumnByHtmlName=function(a){var b,d;b=this.columnsHtmlName[a];if(typeof b=="undefined"&&typeof this.gxCmpContext!="undefined"&&this.gxCmpContext.length<a.length){d=a.substring(0,this.gxCmpContext.length);if(d==this.gxCmpContext){a=a.substring(this.gxCmpContext.length,a.length);b=this.columnsHtmlName[a]}}return b};this.getColumnByGxId=function(a){return this.columnsGxId[a]};
this.getColumnByGxAttId=function(a){return this.columnsGxAttId[a]};this.getColumnForVar=function(a){for(var b=0;b<this.columns.length;b++){var d=this.parentGxObject.getValidStruct(this.columns[b].gxId);if(d&&d.gxvar==a)return this.columns[b]}return null};this.getRowById=function(a){return this.rowsById[a]};this.getRowByGxId=function(a){return this.rowsByGxId[a]};this.setSort=function(a,b){if(a==this.sortColumn)this.ascSort=b==null?!this.ascSort:gx.lang.booleanValue(b);else{this.sortColumn=a;this.ascSort=
b==null?true:gx.lang.booleanValue(b)}this.doSort();this.ownerGrid.refreshGrid()};this.doSort=function(){this.sortColumn!=-1&&this.rows.sort(this.sort)};this.getControlName=function(a,b){return this.gxCmpContext+b.htmlName+"_"+a.gxId};this.getControlId=function(a,b){return this.getControlName(a,b)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/this.pageSize)};this.isGxTrn=function(){return this.parentGxObject.isTransaction()};this.gridObject=
function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(a){return this.gxCmpContext+"delete"+this.gxGridName+"_"+a};this.showDeleteImage=function(a){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&this.isGxTrn())if((a=gx.dom.el(this.deleteImgId(a)))&&!gx.fn.isVisible(a)){a.style.display="inline";if(a.parentNode.nodeName=="A")a.parentNode.style.display="inline"}};this.appendDeleteHeader=function(a,
b){if(!this.gxIsFreestyle&&this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){var d=this.isGxTrn(),g=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(b==gx.grid.deletePositions.left)g=true;else return;else gx.grid.deletePosition==b&&(g=true);if(d&&g){d="&nbsp;";if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)d=gx.grid.deleteTitle;a.append('<th class="'+this.columnHeaderClass+'">'+d+"</th>")}}};this.appendDeleteImage=function(a,b,d){if(this.ownerGrid.deleteMethod!=
gx.grid.deleteMethods.none&&this.isGxTrn()){var g=false,f=false;if(this.parentGxObject.Gx_mode!="DSP"&&this.parentGxObject.Gx_mode!="DLT"){g=b.gxDeleted();f=b.gxIsMod()||b.gxExists()}var k=this.deleteImgId(b.gxId),l=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(d==gx.grid.deletePositions.left)l=true;else return;else if(!this.gxIsFreestyle&&gx.grid.deletePosition==d)l=true;else if(this.gxIsFreestyle){var j=gx.grid.deletePositionFree;d==gx.grid.deletePositions.left?l=j==gx.grid.deletePositions.topL||
j==gx.grid.deletePositions.bottomL:d==gx.grid.deletePositions.right&&(l=j==gx.grid.deletePositions.topR||j==gx.grid.deletePositions.bottomR);d=j}if(l){j='<td style="text-align:'+this.deleteImageAlign(d)+";vertical-align:"+this.deleteVerticalAlign(d)+'">';d="";l=false;if(g&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)d=gx.grid.undeleteImage;else if(f&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)d=gx.grid.deleteImage;else if(g&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)d=
gx.grid.deleteImage;else{d=gx.grid.deleteImage;l=true}g="";a.append(j);if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images){f=gx.fn.firstGridControl(this.ownerGrid.gridId);g=gx.grid.deleteTooltip;a.append('<a gxfocusable="1" href="javascript:'+this.gridObject()+".setRowDeleted('"+b.gxId+"');\"");a.append(' onfocus="gx.evt.onfocus(this,'+f+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+b.gxId+"',"+this.ownerGrid.gridId+')"');b="";l&&(b=b+"display:none;");
b&&a.append(' style="'+b+'"');a.append(">")}a.append('<img id="'+k+'" src="'+d+'"');g&&a.append(' title="'+g+'"');a.append(' style="border-style: none;');l&&a.append("display:none;");a.append('"');a.append("/>");this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&a.append("</a>");a.append("</td>")}}};this.deleteVerticalAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";var b="top";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.bottomR)b=
"bottom";return b}return"middle"};this.deleteImageAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"left";var b="right";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.topL)b="left";return b}return"center"};this.render=function(a,b,d,g){a&&(a=true);var f=this.isGxTrn(),k=this.gxIsFreestyle&&this.gxGridCols>1,b=new gx.text.stringBuffer,l=this.columns,j=l.length,c,e;!this.gxIsFreestyle&&f&&j++;var o=[],u,v;if(Number(this.pageSize)!==
0){c=this.getMaxPage();if(this.currentPage<=0)this.currentPage=1;else if(this.currentPage>c)this.currentPage=c;u=Math.max(this.pageSize*(this.currentPage-1),0);v=Math.min(u+this.pageSize,this.rows.length)}else{u=0;v=this.rows.length}this.tableClass=this.gxCssClass;this.evenRowClass=this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.columnHeaderTextClass=this.columnHeaderClass=this.headerClass=this.gxTitleClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass;
var s="";this.gxHtmlTags.indexOf("class=")==-1&&(s=' class="'+this.gxCssClass+'"');c="";gx.lang.emptyObject(this.gxBackground)||(c=c+(";background-image:url('"+gx.util.resourceUrl(this.gxBackground,true)+"');"));gx.lang.emptyObject(this.gxBorderWidth)||(c=c+(";border: solid "+this.gxBorderWidth+"px "));c=gx.lang.emptyObject(this.gxBordercolor)?c+";":c+(this.gxBordercolor+";");this.ownerGrid.width>0&&(c=c+("width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";"));if(this.gxAllowCollapsing){b.append('<table><tr valign="top"><td>');
b.append('<img class="collapse-icon" style="cursor:pointer;" src="');if(this.gxCollapsed){c="display:none;";b.append(gx.ajax.getImageUrl(gx,"expandImage"))}else b.append(gx.ajax.getImageUrl(gx,"collapseImage"));b.append('" onclick="'+this.gridObject()+'.expandCollapse(this, event);"></td><td width="100%">')}b.append("<table "+s+' id="'+this.gxCmpContext+this.gxGridObject+'Tbl" ');gx.lang.emptyObject(this.gxToolTipText)||b.append('title="'+this.gxToolTipText+'" ');s=t.exec(this.gxHtmlTags);e="";s&&
s.length>1&&(e=s[1]);e=e+c;b.append('style="');b.append(e);b.append('" '+this.gxHtmlTags.replace(t,"")+">");gx.lang.emptyObject(this.headerText)||b.append('<tr><td colspan="'+j+'" class="'+this.headerClass+'">'+this.headerText+"</td></tr>");s=l.length;if(!this.gxIsFreestyle){b.append("<thead>");b.append("<tr>");this.appendDeleteHeader(b,gx.grid.deletePositions.left);var n=gx.ajax.getImageUrl(gx,"ascImage"),p=gx.ajax.getImageUrl(gx,"descImage"),r=0,i;for(c=0;c<s;c++){e=l[c];b.append('<th nowrap="nowrap" class="'+
this.columnHeaderClass+'"');i="";gx.lang.gxBoolean(e.visible)||(i=i+"display:none;");if(e.width){if(!e.gxWidthUnit)e.gxWidthUnit="px";i=i+("width:"+e.width+e.gxWidthUnit+";")}e.align&&(i=i+("text-align:"+e.align+";"));if(!gx.lang.emptyObject(this.gxTitleBackColor)&&(this.gxTitleBackstyle==gx.grid.styles.header||this.gxTitleBackstyle==gx.grid.styles.report)){i=i+("background-color:"+this.gxTitleBackColor+";");this.gxRealTitleBackColor=this.gxTitleBackColor}if(!gx.lang.emptyObject(this.gxBackColor)&&
this.gxTitleBackstyle==gx.grid.styles.uniform){i=i+("background-color:"+this.gxBackColor+";");this.gxRealTitleBackColor=this.gxBackColor}gx.lang.emptyObject(this.gxTitleForeColor)||(i=i+("color:"+this.gxTitleForeColor+";"));gx.lang.emptyObject(this.gxTitleFont)||(i=i+this.gxTitleFont);b.append(' style="'+i+';"');b.append(' colindex="'+r+'"');b.append(">");r++;if(gx.lang.emptyObject(gx.text.trim(e.title)))b.append("&nbsp;");else{b.append("<span");e.gxTooltip&&b.append(' title="'+e.gxTooltip+'"');e.sortable&&
b.append(' onclick="'+this.gridObject()+".grid.setSort("+e.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\"");b.append('">');b.append(e.title);if(this.ascLabel!=null&&this.descLabel!=null){this.ascLabel.src=n;this.descLabel.src=p;e.sortable&&this.sortColumn==e.index&&b.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,o))}b.append("</span>")}b.append("</th>")}this.appendDeleteHeader(b,gx.grid.deletePositions.right);
b.append("</tr>");b.append("</thead>")}b.append("<tbody>");o=true;for(c=u;c<v;c++){n=this.rows[c];a&&(c===u&&!gx.fn.currentGridRowImpl(this.gxId))&&gx.fn.setCurrentGridRow(this.gxId,n.gxId);p=n.gxDeleted();o=!o;i=(o?this.evenRowClass:this.oddRowClass)+(p?" RowDeleted":"");if(this.gxIsFreestyle&&!(this.gxTitleBackstyle==gx.grid.styles.report||this.gxTitleBackstyle==gx.grid.styles.uniform))i=this.tableClass;e=new gx.text.stringBuffer;var q="tr";if(k&&this.gxIsFreestyle&&(c>0&&c%this.gxGridCols===0||
c===0&&this.gxGridCols>0)){c>0&&b.append("</tr>");b.append("<tr>")}this.gxIsFreestyle&&(q="td");r="";this.gxTitleBackstyle==gx.grid.styles.report&&(r=o?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd);if(this.gxTitleBackstyle==gx.grid.styles.header)r=this.gxLinesBackcolorOdd;if(this.gxTitleBackstyle==gx.grid.styles.uniform)r=this.gxBackColor;if(!this.gxIsFreestyle||this.gxIsFreestyle&&k){e.append("<"+q+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+n.gxId+"'");this.gxIsFreestyle&&k?e.append(' gxrow="'+
n.gxId.toString()+'"vAlign="'+this.columns[1].gxControl.verticalAlign+'"'):e.append(' gxrow="'+n.gxId.toString()+'"');this.gxIsFreestyle||e.append(' class="'+i+'"');n.selected&&e.append(' data-selected="1"');i="";r&&(i="background-color:"+r+";");gx.lang.emptyObject(this.gxLinesFont)||(i=i+this.gxLinesFont);i&&e.append(' style="'+i+'" ');e.append(">");b.append(e.toString())}if(this.gxIsFreestyle){if(k){b.append("<table width='100%' cellspacing='0' cellpadding='0'");b.append("><tbody>")}e=this.gxBuffer.toString();
b.append(e)}this.gxIsFreestyle||this.appendDeleteImage(b,n,gx.grid.deletePositions.left);for(i=0;i<s;i++){e=l[i];var q=gx.lang.gxBoolean(e.visible),m=n.gxProps[e.index],x=n.values[e.index],h=e.gxControl;if(this.gxIsFreestyle&&h.type==gx.html.controls.types.row&&e.index===0)h.isFreestyleRow=true;h.setGridData({grid:this.ownerGrid,row:n,gridId:this.gxId,gridRow:n.gxId});if(d){delete h.formattedValue;h.value=x;h.id=e.htmlName+"_"+h.gridRow}else h.setProperties.apply(h,m);if(p){h.rtEnabled=true;h.enabled=
false}if(a)delete gx.usrPtys[h.id];else if(gx.usrPtys[h.id]!==void 0)for(var w in gx.usrPtys[h.id]){if(w=="enabled")h.rtEnabled=true;h.setIndividualProp(w,gx.usrPtys[h.id][w])}if(m.Value)h.value=m.Value;if(m.FormattedValue)h.formattedValue=m.FormattedValue;if(m.Values)h.possibleValues=m.Values.v;if(this.gxIsFreestyle&&h.type==gx.html.controls.types.row&&e.index===0){h.id=this.gxCmpContext+this.gxGridObject+"Row_"+n.gxId;if(f&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)h.oncontextmenu=
this.gridObject()+".showContextMenu(this, event);";if(r)h.style=h.style+("background-color:"+r+";")}if(!this.gxIsFreestyle){b.append('<td valign="'+e.valign+'"');b.append(' colindex="'+i+'"');m="";if(!q){m=m+"display:none;";h.visible&&(!e.isGxRemove()&&!this.ownerGrid.isPromptColumn(e))&&this.ownerGrid.addColPropertyAfterRender(i,"Visible",1)}if(e.width){if(!e.gxWidthUnit)e.gxWidthUnit="px";m=m+("width:"+e.width+e.gxWidthUnit+";")}else if(e.gxColSize)h.colSize=e.gxColSize;e.align&&(m=m+("text-align:"+
e.align+";"));h.style&&(m=m+h.style);m&&b.append(' style="'+m+'" ');b.append(">")}b.append(h.getHtml());this.gxIsFreestyle&&(h.type==gx.html.controls.types.row&&e.index===0)&&this.appendDeleteImage(b,n,gx.grid.deletePositions.left);h.persistValue();this.gxIsFreestyle||b.append("</td>");if(this.gxIsFreestyle){e.index==this.columns.length-1&&this.appendDeleteImage(b,n,gx.grid.deletePositions.right);e=e.buffer.toString();b.append(e)}}this.gxIsFreestyle&&k?k&&b.append("</tbody></table></td>"):this.appendDeleteImage(b,
n,gx.grid.deletePositions.right)}this.gxIsFreestyle&&(this.gxGridCols>0&&k)&&b.append("</tr>");b.append("</tbody>");b.append("<tfoot>");c="";if(f||this.hasPagingButtons()){c=this.buildNavigation(j);b.append(c)}gx.lang.emptyObject(this.footerText)||b.append('<tr><td colspan="'+j+'" class="'+this.footerClass+'">'+this.footerText+"</td></tr>");b.append("</tfoot>");b.append("</table>");this.gxAllowCollapsing&&b.append("</td></tr></table>");if(gx.dom.shouldPurge()){d=["onblur","onclick","onfocus","onchange"];
f=gx.dom.byTag("input",this.container);c=0;for(a=f.length;c<a;c++)gx.dom.purgeElement(f[c],d);f=gx.dom.byTag("textarea",this.container);c=0;for(a=f.length;c<a;c++)gx.dom.purgeElement(f[c],d);f=gx.dom.byTag("select",this.container);c=0;for(a=f.length;c<a;c++)gx.dom.purgeElement(f[c],d);f=gx.dom.byTag("span",this.container);c=0;for(a=f.length;c<a;c++)gx.dom.purgeElement(f[c],d);f=gx.dom.byTag("img",this.container);c=0;for(a=f.length;c<a;c++)gx.dom.purgeElement(f[c],d)}a=(c=gx.dom.getActiveElement())&&
c.id&&gx.dom.isChildNode(c,this.container);this.container.innerHTML=b.toString();if(a)if(c=gx.dom.el(c.id)){gx.csv.disableFocus=true;c.focus()}this.rendered||this.defineEventHandlers();b.clear();g();this.rendered=true};this.defineEventHandlers=function(){this.gxAllowHovering&&!this.gxIsFreestyle&&gx.evt.attach(this.container,"mouseover",this.mouseOverHandler,this);this.gxAllowHovering&&!this.gxIsFreestyle&&gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this);this.isGxTrn()&&this.ownerGrid.deleteMethod==
gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,"contextmenu",this.contextMenuHandler,this);gx.evt.attach(this.container,"mousedown",this.mouseDownHandler.closure(this,[this.gxAllowSelection&&!this.gxIsFreestyle],true),this);this.isGxTrn()&&gx.evt.attach(this.container,"keydown",this.keyDownHandler,this)};this.isGridRow=function(a){return a&&a.tagName=="TR"&&a.getAttribute("gxrow")&&gx.dom.findParentByTagName(a,"DIV")==this.container};this.getTargetRow=function(a,b){var d=a;for(this.isGridRow(d)||
(d=gx.dom.findParentByTagName(a,"TR"));d&&gx.dom.isChildNode(d,this.container);){if(this.isGridRow(d)&&(!b||b=="body"&&d.parentNode.tagName=="TBODY"||b=="header"&&d.parentNode.tagName=="THEAD"))return d;d=gx.dom.findParentByTagName(d,"TR")}};this.mouseOverHandler=function(a){(a=this.getTargetRow(gx.evt.source(a),"body"))&&a.getAttribute("data-selected")!="1"&&this.startRowHover(a,parseInt(a.getAttribute("gxrow").substring(0,4),10)-1)};this.mouseOutHandler=function(a){(a=this.getTargetRow(gx.evt.source(a),
"body"))&&a.getAttribute("data-selected")!="1"&&this.endRowHover(a,parseInt(a.getAttribute("gxrow").substring(0,4),10)-1)};this.contextMenuHandler=function(a){var b=this.getTargetRow(gx.evt.source(a),"body");b&&this.ownerGrid.showContextMenu(b,a)};this.mouseDownHandler=function(a,b){var d=this.getTargetRow(gx.evt.source(a),"body");d&&this.setRowSelected(d,d.getAttribute("gxrow"),true,b)};this.keyDownHandler=function(a){this.getTargetRow(gx.evt.source(a),"body")&&this.ownerGrid.rowKeyPressed(a)};this.changePage=
function(a){var b=this.getMaxPage(),a=parseInt(a,0);a<=0?a=1:a>b&&(a=b);this.currentPage=a;this.render()};this.setRowSelected=function(a,b,d,g){var g=g===void 0||g,f=function(){if(g){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;gx.dom.forEachChild(a,this,function(b){if(a.gxOriginalBackcolor===void 0)b.gxOriginalBackcolor=b.style.backgroundColor})}this.instanciateSelectionVars(b);var d=this.rows.length,f,j=[];for(f=0;f<d;f++){var c=this.rows[f];c.selected=c.gxId==
b;if(c.selected){if(g){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?a.gxOriginalBackcolor:a.style.backgroundColor;a.style.backgroundColor=this.gxSelectionColor.Html;gx.dom.addClass(a,this.selectedRowClass)}j.push(c)}else if(g){c=gx.dom.el(this.gxCmpContext+this.gxGridObject+"Row_"+c.gxId);if(c!=null&&c.gxSBackcolor!==void 0){c.style.backgroundColor=c.gxSBackcolor;gx.util.browser.isIE()&&gx.dom.forEachChild(c,this,function(a){if(a!=null&&a.gxSBackcolor!==void 0)a.style.backgroundColor=a.gxSBackcolor});
gx.dom.removeClass(c,this.selectedRowClass)}}}for(f=0;f<j.length;f++){this.instanciateSelectedRow(j[f]);g&&gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?a.gxOriginalBackcolor:a.style.backgroundColor;a.style.backgroundColor=this.gxSelectionColor.Html})}};d&&g?setTimeout(f.closure(this),100):f.call(this)};this.instanciateSelectionVars=function(a){gx.setGxO(this.parentGxObject.CmpContext,this.parentGxObject.IsMasterPage);gx.fn.setCurrentGridRow(this.gxId,
a);gx.fn.setHidden(this.gxCmpContext+this.gxGridName.toUpperCase()+"_ROW",a.substring(0,4))};this.instanciateSelectedRow=function(a){this.setSelectedRowVars(a);this.gxOnLineActivate&&!this.ownerGrid.isLoading&&this.parentGxObject[this.gxOnLineActivate].call(this.parentGxObject,a.gxId)};this.setSelectedRowVars=function(a){for(var b=this.parentGxObject,d=this.columns.length,g=0;g<d;g++){var f=this.columns[g],k=b.GXValidFnc[f.gxId];if(k!=null){var l=a.values[g];if(this.ownerGrid.isUsercontrol)l=this.properties[a.id][f.index].value;
k.v2v&&k.c2v(l)}}};this.startRowHover=function(a,b){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;gx.dom.forEachChild(a,this,function(a){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor});var d=this.getRowById(b);if(this.gxAllowHovering&&this.gxHoverColor&&!d.selected){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html;gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxHBackcolor=a.style.backgroundColor;
a.style.backgroundColor=this.gxHoverColor.Html})}};this.endRowHover=function(a,b){var d=this.getRowById(b);if(this.gxAllowHovering&&!d.selected&&a.gxHBackcolor!==void 0){a.style.backgroundColor=a.gxHBackcolor;gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){if(a.gxHBackcolor!==void 0)a.style.backgroundColor=a.gxHBackcolor})}};this.hasPagingButtons=function(){return this.usePaging&&(!this.isFirstPage()||!this.isLastPage())};this.buildNavigation=function(a){function b(a,b,c,d,f){return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+
f+'" onblur="this.style.textDecoration = \'none\';"><span '+(d!==void 0?'id="'+d+'"':"")+' style="'+g+'" class="'+l+'" onclick="'+b+'" onMouseOver="this.className=\''+j+"';window.status='"+c+"';return true;\" onMouseOut=\"this.className='"+l+"';window.status='';return true;\">"+a+"</span></a>"}function d(a,b,d,f){return'<span class="'+a+'"'+(d?' onclick="'+b+'" ':"")+('style="'+c+(d?"":"opacity:.7;cursor:default")+'"')+' title="'+f+'">&nbsp;&nbsp;</span>'}var g="cursor:"+(document.createTextRange?
"hand":"pointer")+";",f=new gx.text.stringBuffer,k=this.getRowCount();this.navigationClass=this.gxFooterClass;if(this.gxIsFreestyle&&this.gxGridCols>1)a=this.gxGridCols;gx.lang.emptyObject(this.gxRealTitleBackColor)?f.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;">'):f.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+this.gxRealTitleBackColor+';">');var l=this.navigationLinkClass,j=this.highlightedNavigationLinkClass,
c="padding-left:20px;padding-bottom:5px;";if((k>0||k===0&&!this.isFirstPage())&&this.usePaging){f.append('<div style="padding-bottom:5px;">');if(this.currentPage<=0)this.currentPage=1;f.append(d("PagingButtonsFirst",this.getPaginEvent("FIRST"),!this.isFirstPage(),gx.getMessage("GXM_first")));f.append(d("PagingButtonsPrevious",this.getPaginEvent("PREV"),!this.isFirstPage(),gx.getMessage("GXM_previous")));f.append(d("PagingButtonsNext",this.getPaginEvent("NEXT"),!this.isLastPage(),gx.getMessage("GXM_next")));
f.append(d("PagingButtonsLast",this.getPaginEvent("LAST"),!this.isLastPage(),gx.getMessage("GXM_last")));f.append("</div>")}this.isGxTrn()&&(!this.gxHasAddlines&&this.parentGxObject.Gx_mode!="DSP")&&f.append(b("["+this.gxNewRowText+"]",this.gridObject()+".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);"));f.append("</td></tr>");return f.toString()};this.isLastPage=function(){return this.eof!="0"};this.isFirstPage=function(){return(gx.lang.emptyObject(this.firstRecordOnPage)?
"0":this.firstRecordOnPage)=="0"};this.getPaginEvent=function(a){var b=this.gxGridName.toUpperCase()+"PAGING";return"javascript:gx.fn.setHidden('"+this.gxCmpContext+b+"','"+a+"');gx.evt.execEvt('"+this.gxCmpContext+"E"+b+".', gx.evt.dummyCtrl);"};this.getWebImageTag=function(a){return'<img border="0" src="/'+this.basePath+this.imgsDir+a.toString()+'"/>'};var p=0;this.handleLabel=function(a){if(a.src){var b="img"+p;p++;return"<img name='"+b+"' border='0' src='"+a.src+"'>"}return a};this.sort=function(a,
b){if(a.table.isGxTrn()){if(!a.gxExists()&&!b.gxExists()&&!a.gxIsMod()&&!b.gxIsMod())return 0;if(!a.gxExists()&&b.gxExists()||!a.gxIsMod()&&b.gxIsMod())return 1;if(a.gxExists()&&!b.gxExists()||a.gxIsMod()&&!b.gxIsMod())return-1}var d=a.table,g=d.getColumnByIndex(d.sortColumn),f,k;f=a.values[d.sortColumn];k=b.values[d.sortColumn];gx.lang.instanceOf(f,Array)||(f=[f]);gx.lang.instanceOf(k,Array)||(k=[k]);switch(g.type){case gx.types.numeric:g=function(a){a=gx.num.parseFloat(a,gx.thousandSeparator,gx.decimalPoint);
isNaN(a)&&(a=0);return a};break;case gx.types.date:case gx.types.dateTime:g=function(a){try{a=(new gx.date.gxdate(a)).Value}catch(b){gx.dbg.logEx(b,"JSTable.js","sort")}return a.valueOf()};break;case gx.types.bool:g=function(a){return gx.lang.booleanValue(a)?1:0};break;default:g=function(a){return(""+a).replace(/<[^\>]*\>/g,"").toUpperCase()}}for(var l=Math.max(f.length,k.length),j=0,c=0;j===0&&c<l;c++){var e=f[c];e==null&&(j=-1);var o=k[c];o==null&&(j=1);if(j===0){e=g(e);o=g(o);j=e==o?0:e>o?1:-1}j!==
0&&(j=j*(d.ascSort?1:-1))}return j}};
gx.grid.column=function(q,t,p,a,b){this.table=null;this.index=-1;this.title=q||"";this.type="undefined"!=typeof t?t:gx.types.character;this.width=p||"";this.align=a||"left";this.valign=b||"middle";this.htmlName=null;this.sortable=this.enabled=this.visible=!0;this.rowspan=this.colspan=1;this.gxAttId=this.gxId=-1;this.gxWidthUnit=this.gxAttName="";this.gxUnChecked=this.gxChecked=void 0;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?-1!=this.gxAttName.indexOf("GxRemove")||
-1!=this.gxAttName.indexOf("nRcdDeleted"):!1}};
gx.grid.row=function(q,t,p,a){this.table=null;this.id=q;this.gxParentRowId=a||"";this.gxId=p+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=t.Props||[];this.gxRenderProps=t.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.gxIsMod=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+
this.gxId);return null!=a?0!==Number(a):!1};this.gxDeleted=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.setDeleted=function(a){gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,a?1:0)}};
